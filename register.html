<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/styles-register.css">
    <title>Caffe Trieste | Naročilo</title>
    <link rel="icon" href="images/icon.png" type="image/png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <header class="top-bar">
        <img src="images/logo4.jpg" alt="Logo" class="logo">
        <span class="naslov">Caffé Trieste</span>
        <div class="menu-icon" id="hamburger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="spustni-menu" id="spustni-menu">
            <ul>
                <li><a href="login.html">Prijavite se</a></li>
                <li><a href="register.html">Ustvarite račun</a></li>
                <li><a href="index.html">Novo Naročilo</a></li>
            </ul>
        </div>
    </header>

    <div class="menu-div">
        <div class="content">
            <h2 class="register-title">》 Ustvarite svoj račun 《</h2>

            <div class="name-input">
                <label for="name" class="name-label">Uporabniško ime:</label>
                <input type="text" id="name" class="name-field" placeholder="Ustvarite svoje uporabniško ime">
            </div>
            <div class="mail-input">
                <label for="mail" class="mail-label">Email:</label>
                <input type="mail" id="mail" class="mail-field" placeholder="Vnesite svoj Email">
            </div>
            <div class="password-input">
                <label for="password" class="password-label">Geslo:</label>
                <input type="password" id="password" class="password-field" placeholder="Ustvarite svoje geslo">
            </div>
            <div class="already-account">
                <a href="login.html" style="color: #fff; text-decoration: none;">Že imate račun?</a>
            </div>
            <div class="confirm-button-container">
                <button class="confirm-button">Ustvarite račun</button>
            </div>
        </div>
    </div>

    <!-- javascript reči -->
    <script>
        // spustni menu
        document.addEventListener('DOMContentLoaded', function () {
            const hamburgerMenu = document.getElementById('hamburger-menu');
            const dropdownMenu = document.getElementById('spustni-menu');

            hamburgerMenu.addEventListener('click', function (event) {
                event.stopPropagation();
                dropdownMenu.classList.toggle('show'); // toggle 'show' class
            });

            // close menu when clicking outside of it
            document.addEventListener('click', function (event) {
                if (!hamburgerMenu.contains(event.target) && !dropdownMenu.contains(event.target)) {
                    dropdownMenu.classList.remove('show'); // remove 'show' class
                }
            });

            // SweetAlert
            const confirmButton = document.querySelector('.confirm-button');
            confirmButton.addEventListener('click', function () {
                const nameField = document.getElementById('name');
                const mailField = document.getElementById('mail');
                const passwordField = document.getElementById('password');
                const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/;

                if (nameField.value.trim() === '') {
                    Swal.fire({
                        title: 'Napaka!',
                        text: 'Prosimo, izpolnite vsa polja.',
                        icon: 'error',
                        confirmButtonText: 'V redu',
                        confirmButtonColor: '#4A443F',
                        background: '#000',
                        color: '#fff',
                        customClass: {
                            popup: 'my-sweetalert'
                        }
                    });
                }else if (!passwordPattern.test(passwordField.value)) {
                    Swal.fire({
                        title: 'Napaka!',
                        text: 'Geslo mora vsebovati vsaj 6 znakov in vključevati velike, male črke ter številke.',
                        icon: 'error',
                        confirmButtonText: 'V redu',
                        confirmButtonColor: '#4A443F',
                        background: '#000',
                        color: '#fff',
                        customClass: {
                            popup: 'my-sweetalert'
                        }
                    });
                } else if (!/^[\w.-]+@[\w.-]+\.(com|net|org|si)$/.test(mailField.value.trim())) {
                    Swal.fire({
                        title: 'Napaka!',
                        text: 'Email naslov ni veljaven.',
                        icon: 'error',
                        confirmButtonText: 'V redu',
                        confirmButtonColor: '#4A443F',
                        background: '#000',
                        color: '#fff',
                        customClass: {
                            popup: 'my-sweetalert'
                        }
                    });

                } else {
                    Swal.fire({
                        title: 'Registracija uspešna!',
                        text: 'Uspešno ste se prijavili v svoj račun.',
                        icon: 'success',
                        confirmButtonText: 'V redu',
                        confirmButtonColor: '#4A443F',
                        background: '#000',
                        color: '#fff',
                        customClass: {
                            popup: 'my-sweetalert'
                        }
                    }).then((result) => {
                        if (result.isConfirmed) {
                            location.reload(); // refresh page
                        }
                    });
                }
            });
        });
    </script>
</body>

</html>
